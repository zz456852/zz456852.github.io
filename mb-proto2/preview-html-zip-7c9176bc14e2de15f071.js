try{let z=typeof window<"u"?window:typeof global<"u"?global:typeof globalThis<"u"?globalThis:typeof self<"u"?self:{},V=new z.Error().stack;V&&(z._sentryDebugIds=z._sentryDebugIds||{},z._sentryDebugIds[V]="803c1832-931d-4720-ac28-1ef2ad4472f5",z._sentryDebugIdIdentifier="sentry-dbid-803c1832-931d-4720-ac28-1ef2ad4472f5")}catch(z){}{let z=typeof window<"u"?window:typeof global<"u"?global:typeof globalThis<"u"?globalThis:typeof self<"u"?self:{};z.SENTRY_RELEASE={id:"20.18.1-hotfix.0"}}(()=>{var z={56310:(c,S,i)=>{"use strict";i.d(S,{sI:()=>r});const g="_cmt",r=a=>a.endsWith(g),M=a=>{if(r(a))throw new Error("bad datKey: "+a);return""+a+g},m=a=>{if(!r(a))throw new Error("bad cmtKey: "+a);return a.slice(0,-g.length)},D="_cur",t=a=>a.endsWith(D),e=a=>{if(t(a))throw new Error("bad datKey: "+a);return""+a+D},o=a=>{if(!t(a))throw new Error("bad curKey: "+a);return a.slice(0,-D.length)}},41449:(c,S,i)=>{"use strict";i.d(S,{Dw:()=>r,H:()=>m,QQ:()=>e,X9:()=>t,o$:()=>g});const g="/proto",r=h=>g+"/"+h,M=h=>{const s=/^\/proto\/design\/(?:([^/]+?))$/i.exec(h);return s?s[1]:new Error("project cid error")},m=h=>{let{search:s,pathname:n}=h;if(n.includes("/sharing"))return n.includes("dashboard")||n.includes("htmlzip")?n.split("/").at(-3):n.includes("embed/v2")?location.pathname.split("/").at(-4):n.split("/").at(-2);{const l=new URLSearchParams(s).get("token");if(l)return l;const d=/^\/proto\/([^/]+?)(?:\/forum|\/uichina|\/embed|\/embed\/v2|\/htmlzip|\/sharing|\/ro)?\/?$/i.exec(n);return d?d[1]:""}},D=h=>{let{pathname:s}=h;const n=/^\/proto\/design\/([^/]+)\/?$/i.exec(s);return n?n[1]:""},t=h=>{let{search:s,pathname:n}=h;return m({search:s,pathname:n})||D({pathname:n})},e="/p2mkt_view",o=h=>e+"/"+h,a=h=>/^\/p2mkt_view\/(?:([^/]+?))$/i.exec(h)[1]},44580:(c,S,i)=>{"use strict";i.d(S,{LN:()=>h,o0:()=>D,uC:()=>e,uT:()=>t});var g=i(53955),r=i(42781),M=i(44864);const m=()=>MB.action?MB.__store__.dispatch:MB.webpackInterface.store.dispatch,D=function(s,n){n===void 0&&(n=sdkStore);const l=new Set;return n.walkHotItemSubtree2(s,d=>{d.hotAttr.mktCid&&l.add(d.hotAttr.mktCid)}),[...l]},t=async s=>{const n=(0,g.fV)();if(!n)return{mdWMMktList:new Set,mtWMMktList:new Set,noWMMktList:new Set};const{mdWMMktList:l,mtWMMktList:d,noWMMktList:T}=n,v=s.filter(N=>!l.has(N)&&!d.has(N)&&!T.has(N)),p=await(0,r.E5)(v),E=new Set([...l].concat(p.mdWMMktList)),k=new Set([...d].concat(p.mtWMMktList)),L=new Set([...T].concat(p.noWMMktList));return m()({type:"reducer:watermark:update-state",payload:{mdWMMktList:E,mtWMMktList:k,noWMMktList:L}}),{mdWMMktList:E,mtWMMktList:k,noWMMktList:L}},e=s=>{const n=(0,g.fV)();if(!n)return{mdWMMktList:new Set,mtWMMktList:new Set,noWMMktList:new Set};const{mdWMMktList:l,mtWMMktList:d,noWMMktList:T}=n,v=new Set([...l]),p=new Set([...d]),E=new Set([...T]),k=new Set([...s]);return sdkStore.walkHotItemSubtree2(M.$k,L=>{if(k.has(L.hotAttr.mktCid)&&k.delete(L.hotAttr.mktCid),k.size===0)return!0}),k.forEach(L=>{v.delete(L),p.delete(L),E.delete(L),(0,r.g7)(L)}),m()({type:"reducer:watermark:update-state",payload:{mdWMMktList:v,mtWMMktList:p,noWMMktList:E}}),{mdWMMktList:v,mtWMMktList:p,noWMMktList:E}},o=async()=>{const s=new Set;sdkStore.walkHotItemSubtree2(KEY_RB_MAIN,v=>{!v.hotAttr.mktCid||v.hotAttr.mktUnlock||s.add(v.hotAttr.mktCid)});const n=await splitMktListByCid([...s]),l=new Set(n.mdWMMktList),d=new Set(n.mtWMMktList),T=new Set(n.noWMMktList);return m()({type:"reducer:watermark:update-state",payload:{mdWMMktList:l,mtWMMktList:d,noWMMktList:T}}),{mdWMMktList:l,mtWMMktList:d,noWMMktList:T}},a=()=>{const s=new Set;sdkStore.walkHotItemSubtree2(KEY_RB_MAIN,T=>{T.hotAttr.mktCid&&s.add(T.hotAttr.mktCid)});const n=new Set,l=new Set,d=new Set(s);m()({type:"reducer:watermark:update-state",payload:{mdWMMktList:n,mtWMMktList:l,noWMMktList:d}})},h=s=>{const n=new Set((s==null?void 0:s.md_vip_mkt_list)||[]),l=new Set((s==null?void 0:s.mt_vip_mkt_list)||[]),d=new Set((s==null?void 0:s.no_wm_mkt_list)||[]);m()({type:"reducer:watermark:update-state",payload:{mdWMMktList:n,mtWMMktList:l,noWMMktList:d}})}},42276:(c,S,i)=>{"use strict";var g=i(26114),r=i(94947),M=i(13005),m=i(56656);const D={"sk-bouncedelay":"ZdD58bXGNcNoQjiPeXLu"},t={"sk-bouncedelay":"ZBrU7Yes6CevGkk6hArA"};i(16708),i(85991),i(97381);var e=i(74059),o=i(51044),a=i(46479),h=i(14804),s=i(72605),n=i(10288),l=i(54852),d=i(55793),T=i(39271),v=i(49269),p=i(57464);class E extends o.PureComponent{constructor(u){super(u),(0,e.A)(this,"handleGetViewMode",()=>{var _;const{store:X,isHtmlZip:j}=this.props,I=new URLSearchParams(location.search).get("view_mode");return j?X==null||(_=X.getState())==null||(_=_.editor)==null||(_=_.state)==null||(_=_.mode)==null?void 0:_.previewViewMode:I});const{store:b,projectBasic:x,projectMeta:P,isHtmlZip:C}=u,A=new URLSearchParams(location.search);let W="",f="";const y=A.get("view_mode");["read_only","inspect"].includes(y)&&(W=A.get("screen")||"",f=A.get("canvasId")||""),this.state={visibleIsEmpty:!1};try{const _=(0,T.rV)(W);b.dispatch({type:"entry:root-project:readOnly:activate",payload:{projectBasic:x,projectMeta:P,screenCid:_,canvasCid:f,isHtmlZip:C}})}catch(_){this.state={visibleIsEmpty:!0}}}componentDidMount(){this.props.onComponentDidMount(),window.addEventListener("message",v.a,!1),this.handleGetViewMode()==="inspect"&&MB.__store__.dispatch({type:"entry:handle-tool:toggle:inspect-mode",payload:{mode:!0}})}componentWillUnmount(){window.removeEventListener("message",v.a,!1)}render(){const{store:u}=this.props;return this.state.visibleIsEmpty?(0,d.V)():(0,p.jsx)(s.Kq,{store:u,children:(0,p.jsx)(l.A,{children:(0,p.jsx)(n.A,{})})})}}var k=i(82218);const L=async B=>{let{projectMetaCid:u}=B;await(0,k.F2)({userId:void 0,flpakKey:u,onTransferError:k.z0,onReadOnlyError:k.sH,isDummyCmt:!0,__fetchFlpakAsync:r.BD},void 0)};var N=i(98148);const K=function(B,u,b){const x=u.getGuidesData()||"[]",P=new Set(JSON.parse(x)),C=new Set,A=new Map,W={checkGuideHasShown:f=>ENV.IS_ON_PREMISES||P.has(f),checkGuideToBeShown:f=>C.has(f),getState:()=>({commonGuidesHasShown:Array.from(P),commonGuidesToBeShown:Array.from(C),mountGuidesMap:A}),tryToShowGuide:f=>{var y;if(P.has(f)||!((y=MB)!=null&&(y=y.user)!=null&&y.id)||ENV.IS_ON_PREMISES)return;const _=document.getElementById("MD_"+f);if(_){_.style.display="block";return}C.add(f),(0,N.o)(f,B,b)},markGuideAsRead:f=>{P.add(f),u.setGuidesData(JSON.stringify(Array.from(P)))},batchMarkGuideAsRead:f=>{f.forEach(y=>P.add(y)),u.setGuidesData(JSON.stringify(Array.from(P)))},closeAndMarkGuideAsRead:f=>{W.checkGuideHasShown(f)||(W.closeGuide(f),W.markGuideAsRead(f))},closeGuide:f=>{const y=document.getElementById("MD_"+f);y&&y.parentNode&&y.parentNode.removeChild(y)},closeAllGuide:()=>{const f=document.getElementById("GUIDES");f&&f.parentNode&&f.parentNode.removeChild(f)},removeGuide:f=>{P.delete(f),u.setGuidesData(JSON.stringify(Array.from(P)))},tryToContinueMountGuide:(f,y)=>{const _=A.get(f);_&&typeof(_==null?void 0:_.handleContinue)=="function"&&_.handleContinue(y)},tryToResizeMountGuide:f=>{const y=A.get(f);y&&typeof(y==null?void 0:y.handleResize)=="function"&&y.handleResize()},tryToCloseMountGuide:f=>{const y=A.get(f);y&&typeof(y==null?void 0:y.handleClose)=="function"&&y.handleClose()},registerMountGuideCallback:(f,y)=>{const _=A.get(f)||{};A.set(f,{..._,...y})},removeMountGuideCallback:(f,y)=>{if(!y){A.delete(f);return}const _=A.get(f)||{};A.set(f,{..._,[y]:void 0})}};return W},Z=B=>{let{store:u,commonGuidesData:b,isDesign:x,isPreview:P}=B;MB.commonGuideHelper=K(u,{getGuidesData:()=>b,setGuidesData:updateUserCommonGuidesData},{isDesign:x,isPreview:P})},q=B=>{let{store:u,isDesign:b,isPreview:x}=B;const P={guide:{dashboard_guides:"",workspace_guides:"",square_guides:null,workspace_guides_version:"",default_team_cid:"",root_project_team_cid:"",workspace_guides_2203:"",workspace_guides_2203_version:"",aboard_guides:""},guide_project_template_cid:"",guide_project_template_2203_cid:"",guide_flow_template_cid:"",guide_design_template_cid:"",guide_prototype_template_cid:""},{guide:{workspace_guides:C}}=P;MB.commonGuideHelper=K(u,{getGuidesData:()=>C,setGuidesData:()=>{}},{isDesign:b,isPreview:x})};var Y=i(77757),O=i(25058),H=i(3228),tt=i(42226),Ht=i(68673),ct=i(29601),ht=i(79619);const pt=B=>{let{initialData:u,designOptions:b,global:x,onUpdateSharing:P}=B;const{user:C,org:A,team:W,preference:f,orgList:y,user_fcg:_,org_fcg:X,space:j,canEditByCurrentUser:R}=u,{currentUser:I,currentOrg:F}=(0,ht.n)({user:C,org:A});(0,tt.kZ)((0,ct.w)()),Object.assign(MB,{user:I||{},orgList:y,currentOrg:F,canEditByCurrentUser:R,global:{...x,popupHelper:(0,O.L)(),experienceLoginModalHelper:Y.F}}),MB.action("current:update:state",{currentOrg:F,currentTeam:W,currentUser:I,orgList:y,user_fcg:_,org_fcg:X,currentSpace:j}),MB.action("update:design:options",{designOptions:b}),C!=null&&C.id&&MB.action("entry:init:preference",{preference:f}),P&&P()},zt=async B=>{let{designStore:u}=B,b="[]";try{const{guide:x}=await requestUserCommonGuidesData();b=x==null?void 0:x.workspace_guides}catch(x){console.error("\u83B7\u53D6 guide_data \u5931\u8D25")}await initCommonGuide({store:u,commonGuidesData:b,isDesign:!0,isPreview:!1})},Ft=async B=>{let{type:u,projectBasicCid:b}=B;switch(u){case DesignType.Design:return requestProjectFullDataFlat(b);case DesignType.Experience:return requestExperienceFullDataFlat(b);default:throw new Error(u+" not found in known design types for "+b)}};var dt=i(6987),ut=i(64334),ft=i(51160),mt=i(12201),G=i(9376);const gt=B=>{const{isEmbedV1:u=!1}=B||{};return{isDesktop:!((0,G.Fr)()||u),isInApp:!1,isMultiLink:!1,isMobile:(0,G.Fr)(),isIOSClient:(0,G.Hv)(),isStandAlone:(0,G.Gd)(),isEmbedV1:u,isEmbedV2:!1,isHTMLZip:!1,isUIChina:(0,G.II)(),isForum:(0,G.uf)(),isElectron:(0,G.b8)(),isSquare:!1,isFeishu:(0,G.Fl)(),isWechat:(0,G.vq)(),...B}},vt=B=>{const{isMobile:u,isEmbedV2:b,isSquare:x}=B;return u?ft.A:b||x?ut.A:mt.A};var yt=i(44580);const wt=B=>{let{designOptions:u,previewOptions:b,initialData:x,WMListConfig:P,onComponentDidMount:C,sharing:A}=B,W=!1;const f=(0,h.s)(MB);pt({initialData:x,designOptions:u,global:{designOptions:u,previewOptions:b}}),(0,yt.LN)(P);const{isIOSClient:y,isStandAlone:_}=b;(_||y)&&(document.documentElement.style.height="100vh");const{runnerController:X,messageBucket:j,webpackInterface:R,PreviewApp:I}=(0,dt._)(vt(b));return Object.assign(MB,{runnerController:X,messageBucket:j,webpackInterface:R,global:{...MB.global||{},popupHelper:(0,O.L)(),designOptions:u,previewOptions:b}}),MB.webpackInterface.store.dispatch({type:"preview:update:state",payload:{previewOptions:b}}),{requestData:async F=>{const{user:$,org:Q,preference:J,project_basic:it,project_meta:lt}=x;return q({store:f,isDesign:!0,isPreview:!1}),Object.assign(MB,{tag:it==null?void 0:it.version}),MB.action("update:design:options",{designOptions:MB.global.designOptions}),await L({projectMetaCid:lt.cid}),MB.webpackInterface.store.dispatch({type:"preview:set:current-projectShare",payload:{projectShare:A}}),MB.webpackInterface.store.dispatch({type:"entry:init:preview:preference",payload:{preference:J||{}}}),MB.action("entry:handle-tool:preview:view_mode",{previewViewMode:F}),Object.assign(MB,{user:$||{},canEditByCurrentUser:!1,org:Q||void 0}),MB.webpackInterface.store.dispatch({type:"entry:state:init"}),W=!0,{projectAlike:it,projectMeta:lt,projectShare:A}},renderDesign:F=>{let{projectAlike:$,projectMeta:Q}=F;return W?(0,p.jsx)(E,{store:f,projectBasic:$,projectMeta:Q,onComponentDidMount:C,isHtmlZip:!0}):null},renderPreview:F=>{let{projectAlike:$,projectMeta:Q,projectShare:J}=F;return W?((0,d.X)(J),(0,p.jsx)(I,{store:R.store,previewMode:"preview",projectAlike:$,projectMeta:Q,projectShare:J})):null}}};var ot=i(21676);const Gt=ot.Ay.div.withConfig({displayName:"styles__StyledExampleApp",componentId:"sc-1r36j4k-0"})(["&{position:absolute;top:0;left:0;bottom:0;right:0;transition:all 0.2s ease-in-out;.loading-container{position:absolute;top:50%;left:50%;.mb-loading{width:80px;height:80px;margin-top:-40px;margin-left:-40px;}.chris-icon{position:absolute;left:68%;top:-8%;}}}.mb-design-page{height:100%;&,#mb-toolbar{transition:all 0.2s ease-in-out;}&.is-collapse{opacity:0;z-index:0;#mb-toolbar{transform:translateY(-100%);}.mb-right-panel{transform:translateX(100%);}}}.mb-preview-page{position:absolute;top:0;left:0;width:100%;bottom:0;font-size:12px;transition:all 0.2s ease-in-out;&.is-collapse{opacity:0;z-index:0;}}"]),St=ot.Ay.div.withConfig({displayName:"styles__StyledROExampleApp",componentId:"sc-1r36j4k-1"})(["&{position:absolute;top:0;left:0;bottom:0;right:0;transition:all 0.2s ease-in-out;.loading-container{position:absolute;top:50%;left:50%;.mb-loading{width:80px;height:80px;margin-top:-40px;margin-left:-40px;}.chris-icon{position:absolute;left:68%;top:-8%;}}}.mb-design-page{height:100%;position:relative;z-index:1;&.is-collapse{opacity:0;z-index:0;}}.mb-preview-page{position:absolute;top:0;left:0;width:100%;bottom:0;font-size:12px;&.is-collapse{opacity:0;z-index:0;}}"]);var nt=i(1694),bt=i(21952),xt=i(86634),rt=i.n(xt);class Mt extends o.PureComponent{render(){const{isCollapse:u,renderReadOnly:b,projectAlike:x,projectMeta:P}=this.props;return(0,p.jsx)("div",{ref:C=>this.$element=C,className:rt()("mb-design-page",{"is-collapse":u}),children:b({projectAlike:x,projectMeta:P})})}}class Pt extends o.PureComponent{constructor(u){super(u),(0,e.A)(this,"setElementRef",b=>this.$element=b),MB.f.inPreview=!u.isCollapse}componentDidMount(){this.$element.addEventListener("wheel",this.handleWheel,{passive:!1})}componentWillUnmount(){MB.f.inPreview=!1,this.$element.removeEventListener("wheel",this.handleWheel)}handleWheel(u){(u.ctrlKey||u.metaKey)&&u.preventDefault()}render(){const{isCollapse:u,renderPreview:b,projectAlike:x,projectMeta:P,projectShare:C}=this.props;return(0,p.jsx)("div",{ref:this.setElementRef,className:rt()("mb-preview-page",{"is-collapse":u}),children:b({projectAlike:x,projectMeta:P,projectShare:C})})}}var Tt=i(39348),Et=i(14941),_t=i(86431),et=i(24013),kt=i(31900),Bt=i(15139),Ct=i(40684),U=i(76445),at=i(6637);const At=B=>{const{current:{currentProject:u},ui:{toolbar:{isShowSticky:b},leftLayout:{leftPanel:{show:x,width:P},directory:{screen:{currentPage:C},bottom:{height:A},screen:{screenCollapseKeySet:W}}},rightLayout:{rightPanel:{show:f,resizedWidth:y}},fixedLayout:{modals:{previewCanvasModal:_,previewModal:X}}},editor:{state:{mode:{fullScreenMode:j}}}}=MB.__store__.getState(),R=()=>{MB.__store__.dispatch({type:"entry:handle-tool:preview:view_mode",payload:{previewViewMode:"device"}});const{pageKey:I,canvasKey:F}=Bt.A.validateAndTryCorrectPGAndCVKey(C.key,B,null,u.category===Ct.t_);MB.webpackInterface.store.dispatch({type:"entry:runner:activate:canvas",payload:{pageKey:I,canvasKey:F,saveHistory:!1,forceInit:!0,keepScale:!1}}),MB.webpackInterface.store.dispatch({type:"preview:set:leftPaneWidth",payload:{leftPaneWidth:P!=null?P:250}}),MB.webpackInterface.store.dispatch({type:"preview:update:state",payload:{hasChangedScaleManually:!1}}),MB.webpackInterface.store.dispatch({type:"preview:panel:set:height",payload:{panelHeight:A}}),MB.webpackInterface.store.dispatch({type:"preview:set:rightPaneWidth",payload:{rightPaneWidth:y,projectCid:u.cid}}),j&&MB.webpackInterface.store.dispatch({type:"reducer:preview-toolbar:fullscreen",payload:{isFullScreenMode:!0}}),MB.webpackInterface.store.dispatch({type:"ST:update",payload:{STMode:b}}),MB.webpackInterface.store.dispatch({type:"entry:preview-setting:toggle:isMinimized",payload:{isMinimized:!x,isMemorize:!j}}),MB.webpackInterface.store.dispatch({type:"entry:preview-setting:toggle:rightPane",payload:{isShowRightPane:f,isMemorize:!j}}),MB.webpackInterface.store.dispatch({type:"preview:set:collapsedRBPageKeySet",payload:{collapsedRBPageKeySet:W}}),MB.webpackInterface.store.dispatch({type:"entry:preview:toggle:isHiddenToolBar",payload:{value:!1}}),MB.action("modal:reset:state"),MB.action("entry:exit:edit:basket"),MB.__store__.dispatch({type:"entry:comment:disabled",payload:{noWigglingCommentCid:!0}}),MB.__store__.dispatch({type:"versions:update",payload:{isVersionManagementPaneShow:!1}}),MB.__store__.dispatch(U.GO.toggleInspectMode(!1)),MB.__store__.dispatch(U.GO.toggleHandMode(!1)),MB.__store__.dispatch(U.GO.select([])),MB.__store__.dispatch({type:"elbow:update",payload:{isInElbowMode:!1}}),MB.__store__.dispatch({type:"entry:ST:STMode:disable"}),MB.__store__.dispatch({type:"ST:clear"})};_!=null&&_.isOpen||X!=null&&X.isOpen?(MB.action("modal:reset:preview:modal:state"),setTimeout(()=>{R()},600)):R()},Dt=(B,u,b)=>{const{container:{current:{rootProject:x},common:{leftPaneWidth:P,panelHeight:C,rightPaneWidth:A,collapsedRBPageKeySet:W},runner:{activePageKey:f},previewSetting:{isFullScreenMode:y,isMinimized:_,isShowRightPane:X}},ST:{STMode:j}}=MB.webpackInterface.store.getState(),{ui:{leftLayout:{directory:{screen:{currentPage:R}}}},editor:{state:{mode:{isHtmlZipPreview:I}}}}=MB.__store__.getState();b==="inspect"?(MB.__store__.dispatch({type:"entry:comment:disabled"}),MB.__store__.dispatch(U.GO.toggleInspectMode(!1)),MB.__store__.dispatch(U.GO.toggleHandMode(!1)),MB.__store__.dispatch(U.GO.select([]))):(R.key!==f&&MB.__store__.dispatch({type:"entry:root-project:readOnly:activate",payload:{projectBasic:B,projectMeta:u,screenCid:f,isHtmlZip:I}}),MB.__store__.dispatch({type:"screen:add:collapseKeySet",payload:{refs:W,projectCid:x.cid}}),y&&MB.__store__.dispatch(U.GO.toggleFullScreenMode(!0)),MB.webpackInterface.store.dispatch({type:"entry:runner:cleanup:audio"}),MB.webpackInterface.store.dispatch({type:"runner:reset:state:except:history"}),MB.webpackInterface.store.dispatch({type:"container:comment:reset:state"}),MB.webpackInterface.store.dispatch({type:"preview:previewPanel:navindex",payload:{previewPanelNavIndex:0}}),MB.__store__.dispatch({type:"left-panel:set:width",payload:{width:P,projectCid:x.cid}}),MB.__store__.dispatch({type:"directory-panel:bottom:set:height",payload:{height:C}}),MB.__store__.dispatch({type:"right-side-panel:update:resize:width",payload:{width:A,projectCid:x.cid}}),MB.__store__.dispatch({type:"right-side-panel:collapse:panel",payload:{show:X,isMemorize:!y}}),MB.__store__.dispatch({type:"left-panel:collapse:panel:show",payload:{show:!_,isMemorize:!y}}),MB.__store__.dispatch({type:"entry:observe:dom:size:update-viewport-rect"}),MB.__store__.dispatch({type:"entry:isShowSticky:toggle",payload:{isShowSticky:j}}),requestAnimationFrame(()=>MB.__store__.dispatch({type:"entry:update:viewport:rect"})),MB.webpackInterface.store.dispatch({type:"entry:comment:disabled"}),(0,at.RF)(f))},Xt=(B,u,b)=>{if(b!=="read_only"){const{container:{current:{rootProject:x},common:{leftPaneWidth:P,panelHeight:C,rightPaneWidth:A,collapsedRBPageKeySet:W},runner:{activePageKey:f},previewSetting:{isFullScreenMode:y,isMinimized:_,isShowRightPane:X}},ST:{STMode:j}}=MB.webpackInterface.store.getState(),{ui:{leftLayout:{directory:{screen:{currentPage:R}}}},editor:{state:{mode:{isHtmlZipPreview:I}}}}=MB.__store__.getState();R.key!==f&&MB.__store__.dispatch({type:"entry:root-project:readOnly:activate",payload:{projectBasic:B,projectMeta:u,screenCid:f,isHtmlZip:I}}),MB.__store__.dispatch({type:"screen:add:collapseKeySet",payload:{refs:W,projectCid:x.cid}}),y&&MB.__store__.dispatch(U.GO.toggleFullScreenMode(!0)),MB.webpackInterface.store.dispatch({type:"entry:runner:cleanup:audio"}),MB.webpackInterface.store.dispatch({type:"runner:reset:state:except:history"}),MB.webpackInterface.store.dispatch({type:"container:comment:reset:state"}),MB.webpackInterface.store.dispatch({type:"preview:previewPanel:navindex",payload:{previewPanelNavIndex:0}}),MB.__store__.dispatch({type:"left-panel:set:width",payload:{width:P,projectCid:x.cid}}),MB.__store__.dispatch({type:"directory-panel:bottom:set:height",payload:{height:C}}),MB.__store__.dispatch({type:"right-side-panel:update:resize:width",payload:{width:A,projectCid:x.cid}}),MB.__store__.dispatch({type:"right-side-panel:collapse:panel",payload:{show:X,isMemorize:!y}}),MB.__store__.dispatch({type:"left-panel:collapse:panel:show",payload:{show:!_,isMemorize:!y}}),MB.__store__.dispatch({type:"entry:observe:dom:size:update-viewport-rect"}),MB.__store__.dispatch({type:"entry:isShowSticky:toggle",payload:{isShowSticky:j}}),requestAnimationFrame(()=>{MB.__store__.dispatch({type:"entry:update:viewport:rect"})}),(0,at.RF)(f)}MB.__store__.dispatch({type:"entry:handle-tool:toggle:inspect-mode",payload:{mode:!0}})};class Lt extends o.PureComponent{constructor(u){super(u),(0,e.A)(this,"handleWheelChanged",X=>{if(X.deltaX===0)return;const j=document.getElementById("workspace"),R=j.scrollLeft+j.offsetWidth===j.scrollWidth&&X.deltaX>0,I=j.scrollLeft===0&&X.deltaX<0;(R||I)&&X.preventDefault()}),(0,e.A)(this,"handleDesignDidMount",()=>{MB.reduxEntry.setEntryMap(Tt.T),this.setState({isLoading:!1})}),(0,e.A)(this,"keyboardManager",new nt.Rr);const{viewMode:b,designOptions:x,previewOptions:P,initialData:C,WMListConfig:A,sharing:W}=u;MB.switchToPreview=X=>{this.state.viewMode!=="device"&&((0,et.N8)("device"),At(X),this.setState({viewMode:"device"}))},MB.switchToReadOnly=()=>{if(this.state.viewMode==="read_only")return;const{projectAlike:X,projectMeta:j,viewMode:R}=this.state;(0,et.N8)("read_only"),Dt(X,j,R),this.setState({viewMode:"read_only"})},MB.switchToInspect=()=>{if(this.state.viewMode==="inspect")return;const{projectAlike:X,projectMeta:j,viewMode:R}=this.state;(0,et.N8)("inspect"),Xt(X,j,R),this.setState({viewMode:"inspect"})},this.state={isLoading:!0,isDataLoaded:!1,viewMode:b,projectAlike:null,projectMeta:null,projectShare:void 0};const{requestData:f,renderDesign:y,renderPreview:_}=wt({initialData:C,WMListConfig:A,designOptions:x,previewOptions:P,onComponentDidMount:this.handleDesignDidMount,sharing:W});this.requestData=f,this.renderDesign=y,this.renderPreview=_}componentDidMount(){Promise.all([this.requestData(this.state.viewMode)]).then(u=>{let[{projectAlike:b,projectMeta:x,projectShare:P}]=u;this.setState({projectAlike:b,projectMeta:x,projectShare:P},()=>{this.setState({isDataLoaded:!0})});const C=document.getElementById("workspace");C&&C.addEventListener("wheel",this.handleWheelChanged)})}componentWillUnmount(){const u=document.getElementById("workspace");u&&u.removeEventListener("wheel",this.handleWheelChanged,{capture:!0})}render(){const{isLoading:u,isDataLoaded:b,viewMode:x,projectAlike:P,projectMeta:C,projectShare:A}=this.state,{renderDesign:W,renderPreview:f}=this;return(0,p.jsx)(kt.G.Provider,{value:x,children:(0,p.jsx)(nt.M.Provider,{value:this.keyboardManager,children:(0,p.jsx)(bt.$,{children:(0,p.jsxs)(St,{className:"example-app",children:[b&&(0,p.jsx)(Mt,{isCollapse:!["read_only","inspect"].includes(x),projectAlike:P,projectMeta:C,renderReadOnly:W}),b&&(0,p.jsx)(Pt,{isCollapse:x!=="device",projectAlike:P,projectMeta:C,projectShare:A,renderPreview:f}),u&&(0,p.jsxs)("div",{className:"loading-container",children:[(0,p.jsx)(a.Tw,{className:"mb-loading"}),(0,_t.X)()&&(0,p.jsx)(Et.n,{className:"chris-icon"})]})]})})})})}}var Wt=i(98794),Yt=i(88223),jt=i(10286),Ot=i(36429);i.p="./mb-proto2/";const Rt=document.getElementById("workspace"),It=async()=>{var B,u;const b=gt({isHTMLZip:!0});(0,G.Fr)()&&((B=document.querySelector("body"))==null||B.classList.add("mobile"));let x=await(0,r.Rz)();const{projectUpper:P,projectMeta:C}=x;x={...x,projectName:P.name,project_basic:P,project_meta:C};const{sharing:A}=await(0,jt.J_)({project:P}),W=await(0,r.CS)(),{generateLang:f}=await Ot.qu.loadLLG();await f(),document.title=""+(0,Yt.qk)(P.name||P.title),!ENV.IS_ON_PREMISES&&(0,Wt.I2)();const y=(u=new URLSearchParams(location.search))==null?void 0:u.get("view_mode"),_=window.HZv5_PREVIEW_MODE||"",X=y||_,j=["device","read_only","inspect"].includes(X)?X:"read_only",R={isDesign:!0,isExperience:!1,isLoggedExperience:!1};(0,g.createRoot)(Rt).render((0,p.jsx)(Lt,{initialData:x,WMListConfig:W,viewMode:j,designOptions:R,previewOptions:b,sharing:A}))};document.addEventListener("DOMContentLoaded",async()=>{await It()})},9376:(c,S,i)=>{"use strict";i.d(S,{Bd:()=>L,Fl:()=>t,Fr:()=>s,Gd:()=>v,H8:()=>o,Hv:()=>T,II:()=>p,Md:()=>k,VK:()=>q,b8:()=>M,cX:()=>m,gm:()=>a,lg:()=>N,m0:()=>n,nr:()=>h,uF:()=>D,uf:()=>E,un:()=>d,vq:()=>e});var g,r;const M=()=>window.MB_DESKTOP_VERSION||window.isElectron||/Electron/i.test(navigator.userAgent),m=()=>/(Macintosh)/i.test(navigator.userAgent),D=()=>/(Windows)/i.test(navigator.userAgent),t=()=>/(Lark)/i.test(navigator.userAgent),e=()=>/MicroMessenger/i.test(navigator.userAgent),o=()=>/Chrome/i.test(navigator.userAgent),a=()=>/Firefox/i.test(navigator.userAgent),h=()=>/Safari/.test(navigator.userAgent)&&!/Chrome/.test(navigator.userAgent),s=()=>{const Y=new URLSearchParams(location.search);return Y&&Y.get("inapp")==="1"&&(i.g.isInAPP=!0),/(iPod|iPhone|iPad|Android|MobileClient)/.test(navigator.userAgent)||window.isInAPP},n=()=>/Android/i.test(navigator.userAgent),l=()=>/(iPad)/.test(navigator.userAgent),d=()=>/(iPod|iPhone|iPad)/.test(navigator.userAgent),T=()=>!!(window.webkit&&window.webkit.messageHandlers),v=()=>navigator.standalone,p=()=>/\/uichina$/.test(location.pathname),E=()=>/\/forum$/.test(location.pathname),k=()=>/(MobileClient)/.test(navigator.userAgent),L=!!(typeof window<"u"&&window.document&&window.document.createElement),N=/(mac|iphone|ipod|ipad)/i.test(typeof navigator<"u"?((g=navigator)==null?void 0:g.platform)||((r=navigator)==null||(r=r.userAgentData)==null?void 0:r.platform):""),K=()=>{var Y;if(!((Y=navigator)!=null&&Y.plugins))return!1;for(const O in navigator.plugins)if(navigator.plugins[O]&&navigator.plugins[O].filename==="np-mswmp.dll")return!0;return!1},Z=Y=>{Y=Y.toLowerCase();const O=Y.includes("qihu"),H=Y.includes("360se"),tt=Y.includes("360ee");return O&&(H||tt)},q=()=>{let Y,O;const H=navigator.userAgent;if(O=void 0,Y=H.match(/(opera|chrome|qq|safari|firefox|msie|trident(?=\/))\/?\s*(\d+)/i)||[],/trident/i.test(Y[1]))return O=/\brv[ :]+(\d+)/g.exec(H)||[],{name:"IE",version:parseFloat(O[1]||"")};if(Y[1]==="Chrome"){if(Z(H)||K())return{name:"360Browser",version:"unknown"};if(/Edg/i.test(H))return O=H.match(/Edg\/(\d+)/i),{name:"Edge",version:O?parseFloat(O[1]):"unknown"};if(O=H.match(/\b(OPR|Edge)\/(\d+)/),O!==null)return{name:O[1].replace("OPR","Opera"),version:parseFloat(O[2])}}return/QQBrowser/i.test(H)?(O=H.match(/QQBrowser\/(\d+)/i),{name:"QQBrowser",version:O?parseFloat(O[1]):"unknown"}):(Y=Y[2]?[Y[1],Y[2]]:[navigator.appName,navigator.appVersion,"-?"],(O=H.match(/version\/(\d+)/i))!==null&&Y.splice(1,1,O[1]),{name:Y[0],version:parseFloat(Y[1])})}},6637:(c,S,i)=>{"use strict";i.d(S,{Fw:()=>t,H1:()=>o,RF:()=>s,cL:()=>a,fl:()=>h,hw:()=>e,u5:()=>M,yA:()=>D});var g=i(12298),r=i(6795);const M=n=>{let{width:l,height:d,scale:T}=n;const v=T/100,p=document.querySelector("#canvas").getBoundingClientRect(),E=document.querySelector(".mb-viewport").getBoundingClientRect(),k={x:(E.left+E.right)/2,y:(E.top+E.bottom)/2},L={x:(k.x-p.left)/v,y:(k.y-p.top)/v};return{top:Math.round(L.y-d/2),left:Math.round(L.x-l/2)}},m=(n,l)=>{const d=document.querySelector(n);if(!d)return;const T=d.querySelector('[data-cid="'+l+'"]')||d.querySelector('[data-interactive-target-key="'+l+'"]');if(!T)return;const{height:v,top:p}=d.getBoundingClientRect(),E=T.getBoundingClientRect(),k=E.top-p>=v,L=E.top<p;(k||L)&&(d.scrollTop+=E.top-p)},D=(0,r.hb)((n,l)=>{if(!l||!n)return;const d=n.querySelector('.rn-content-item[data-cid="'+l+'"]');if(!d)return;const{height:T,top:v}=n.getBoundingClientRect(),p=d.getBoundingClientRect(),E=p.top-v>=T,k=p.top<v;(E||k)&&(n.scrollTop+=p.top-v)},{timeout:500}),t=(n,l,d)=>{let{width:T,height:v,scale:p}=l,{top:E}=M({width:T,height:v,scale:p});const k=n.sort((K,Z)=>Z.widget.x+Z.widget.w/2-(K.widget.x+K.widget.w/2)),{widget:{x:L,w:N}}=k[0];return d.length!==0&&(E=sdkStore.getHotKeyListAABB(d.map(K=>K.key))[1]),{left:L+N/2+50,top:E}},e=(n,l,d)=>{const T=sdkStore.getHotKeyListAABB(d.map(k=>k.key));let v=T[2],p=(0,g.Q5)(v,n),E;for(;;){if(!p||p[0]>v+l+50){E={x:v+50,y:T[1]};break}v=p[2],p=(0,g.Q5)(v,n)}return{left:E.x,top:E.y}},o=n=>m("#mobile-screen-tree",n),a=n=>m(".mb-preview-page .canvas-scroll-list",n),h=n=>m(".screen-list-container",n),s=n=>m(".mb-design-page #screen-scroll-list",n)},85991:()=>{/*! iScroll v5.2.0-snapshot ~ (c) 2008-2017 Matteo Spinelli ~ http://cubiq.org/license */(function(c,S,i){var g=c.requestAnimationFrame||c.webkitRequestAnimationFrame||c.mozRequestAnimationFrame||c.oRequestAnimationFrame||c.msRequestAnimationFrame||function(t){c.setTimeout(t,16.666666666666668)},r=function(){var t={},e=S.createElement("div").style,o=function(){for(var s=["t","webkitT","MozT","msT","OT"],n,l=0,d=s.length;l<d;l++)if(n=s[l]+"ransform",n in e)return s[l].substr(0,s[l].length-1);return!1}();function a(s){return o===!1?!1:o===""?s:o+s.charAt(0).toUpperCase()+s.substr(1)}t.getTime=Date.now||function(){return new Date().getTime()},t.extend=function(s,n){for(var l in n)s[l]=n[l]},t.addEvent=function(s,n,l,d){s.addEventListener(n,l,!!d)},t.removeEvent=function(s,n,l,d){s.removeEventListener(n,l,!!d)},t.prefixPointerEvent=function(s){return c.MSPointerEvent?"MSPointer"+s.charAt(7).toUpperCase()+s.substr(8):s},t.momentum=function(s,n,l,d,T,v){var p=s-n,E=i.abs(p)/l,k,L;return v=v===void 0?6e-4:v,k=s+E*E/(2*v)*(p<0?-1:1),L=E/v,k<d?(k=T?d-T/2.5*(E/8):d,p=i.abs(k-s),L=p/E):k>0&&(k=T?T/2.5*(E/8):0,p=i.abs(s)+k,L=p/E),{destination:i.round(k),duration:L}};var h=a("transform");return t.extend(t,{hasTransform:h!==!1,hasPerspective:a("perspective")in e,hasTouch:"ontouchstart"in c,hasPointer:!!(c.PointerEvent||c.MSPointerEvent),hasTransition:a("transition")in e}),t.isBadAndroid=function(){var s=c.navigator.appVersion;if(/Android/.test(s)&&!/Chrome\/\d/.test(s)){var n=s.match(/Safari\/(\d+.\d)/);return n&&typeof n=="object"&&n.length>=2?parseFloat(n[1])<535.19:!0}else return!1}(),t.extend(t.style={},{transform:h,transitionTimingFunction:a("transitionTimingFunction"),transitionDuration:a("transitionDuration"),transitionDelay:a("transitionDelay"),transformOrigin:a("transformOrigin"),touchAction:a("touchAction")}),t.hasClass=function(s,n){var l=new RegExp("(^|\\s)"+n+"(\\s|$)");return l.test(s.className)},t.addClass=function(s,n){if(!t.hasClass(s,n)){var l=s.className.split(" ");l.push(n),s.className=l.join(" ")}},t.removeClass=function(s,n){if(t.hasClass(s,n)){var l=new RegExp("(^|\\s)"+n+"(\\s|$)","g");s.className=s.className.replace(l," ")}},t.offset=function(s){for(var n=-s.offsetLeft,l=-s.offsetTop;s=s.offsetParent;)n-=s.offsetLeft,l-=s.offsetTop;return{left:n,top:l}},t.preventDefaultException=function(s,n){for(var l in n)if(n[l].test(s[l]))return!0;return!1},t.extend(t.eventType={},{touchstart:1,touchmove:1,touchend:1,mousedown:2,mousemove:2,mouseup:2,pointerdown:3,pointermove:3,pointerup:3,MSPointerDown:3,MSPointerMove:3,MSPointerUp:3}),t.extend(t.ease={},{quadratic:{style:"cubic-bezier(0.25, 0.46, 0.45, 0.94)",fn:function(s){return s*(2-s)}},circular:{style:"cubic-bezier(0.1, 0.57, 0.1, 1)",fn:function(s){return i.sqrt(1- --s*s)}},back:{style:"cubic-bezier(0.175, 0.885, 0.32, 1.275)",fn:function(s){var n=4;return(s=s-1)*s*((n+1)*s+n)+1}},bounce:{style:"",fn:function(s){return(s/=1)<1/2.75?7.5625*s*s:s<2/2.75?7.5625*(s-=1.5/2.75)*s+.75:s<2.5/2.75?7.5625*(s-=2.25/2.75)*s+.9375:7.5625*(s-=2.625/2.75)*s+.984375}},elastic:{style:"",fn:function(s){var n=.22,l=.4;return s===0?0:s==1?1:l*i.pow(2,-10*s)*i.sin((s-n/4)*(2*i.PI)/n)+1}}}),t.tap=function(s,n){var l=S.createEvent("Event");l.initEvent(n,!0,!0),l.pageX=s.pageX,l.pageY=s.pageY,s.target.dispatchEvent(l)},t.click=function(s){var n=s.target,l;/(SELECT|INPUT|TEXTAREA)/i.test(n.tagName)||(l=S.createEvent(c.MouseEvent?"MouseEvents":"Event"),l.initEvent("click",!0,!0),l.view=s.view||c,l.detail=1,l.screenX=n.screenX||0,l.screenY=n.screenY||0,l.clientX=n.clientX||0,l.clientY=n.clientY||0,l.ctrlKey=!!s.ctrlKey,l.altKey=!!s.altKey,l.shiftKey=!!s.shiftKey,l.metaKey=!!s.metaKey,l.button=0,l.relatedTarget=null,l._constructed=!0,n.dispatchEvent(l))},t.getTouchAction=function(s,n){var l="none";return s==="vertical"?l="pan-y":s==="horizontal"&&(l="pan-x"),n&&l!="none"&&(l+=" pinch-zoom"),l},t.getRect=function(s){if(s instanceof SVGElement){var n=s.getBoundingClientRect();return{top:n.top,left:n.left,width:n.width,height:n.height}}else return{top:s.offsetTop,left:s.offsetLeft,width:s.offsetWidth,height:s.offsetHeight}},t}();function M(t,e){this.wrapper=typeof t=="string"?S.querySelector(t):t,this.scroller=this.wrapper.children[0],this.scrollerStyle=this.scroller.style,this.options={resizeScrollbars:!0,mouseWheelSpeed:20,snapThreshold:.334,disablePointer:!r.hasPointer,disableTouch:r.hasPointer||!r.hasTouch,disableMouse:r.hasPointer||r.hasTouch,startX:0,startY:0,scrollY:!0,directionLockThreshold:5,momentum:!0,bounce:!0,bounceTime:600,bounceEasing:"",preventDefault:!0,preventDefaultException:{tagName:/^(INPUT|TEXTAREA|BUTTON|SELECT)$/},HWCompositing:!0,useTransition:!0,useTransform:!0,bindToWrapper:typeof c.onmousedown>"u"};for(var o in e)this.options[o]=e[o];this.translateZ=this.options.HWCompositing&&r.hasPerspective?" translateZ(0)":"",this.options.useTransition=r.hasTransition&&this.options.useTransition,this.options.useTransform=r.hasTransform&&this.options.useTransform,this.options.eventPassthrough=this.options.eventPassthrough===!0?"vertical":this.options.eventPassthrough,this.options.preventDefault=!this.options.eventPassthrough&&this.options.preventDefault,this.options.scrollY=this.options.eventPassthrough=="vertical"?!1:this.options.scrollY,this.options.scrollX=this.options.eventPassthrough=="horizontal"?!1:this.options.scrollX,this.options.freeScroll=this.options.freeScroll&&!this.options.eventPassthrough,this.options.directionLockThreshold=this.options.eventPassthrough?0:this.options.directionLockThreshold,this.options.bounceEasing=typeof this.options.bounceEasing=="string"?r.ease[this.options.bounceEasing]||r.ease.circular:this.options.bounceEasing,this.options.resizePolling=this.options.resizePolling===void 0?60:this.options.resizePolling,this.options.tap===!0&&(this.options.tap="tap"),!this.options.useTransition&&!this.options.useTransform&&(/relative|absolute/i.test(this.scrollerStyle.position)||(this.scrollerStyle.position="relative")),this.options.shrinkScrollbars=="scale"&&(this.options.useTransition=!1),this.options.invertWheelDirection=this.options.invertWheelDirection?-1:1,this.options.probeType==3&&(this.options.useTransition=!1),this.x=0,this.y=0,this.directionX=0,this.directionY=0,this._events={},this._init(),this.refresh(),this.scrollTo(this.options.startX,this.options.startY),this.enable()}M.prototype={version:"5.2.0-snapshot",_init:function(){this._initEvents(),(this.options.scrollbars||this.options.indicators)&&this._initIndicators(),this.options.mouseWheel&&this._initWheel(),this.options.snap&&this._initSnap(),this.options.keyBindings&&this._initKeys()},destroy:function(){this._initEvents(!0),clearTimeout(this.resizeTimeout),this.resizeTimeout=null,this._execEvent("destroy")},_transitionEnd:function(t){t.target!=this.scroller||!this.isInTransition||(this._transitionTime(),this.resetPosition(this.options.bounceTime)||(this.isInTransition=!1,this._execEvent("scrollEnd")))},_start:function(t){if(r.eventType[t.type]!=1){var e;if(t.which?e=t.button:e=t.button<2?0:t.button==4?1:2,e!==0)return}if(!(!this.enabled||this.initiated&&r.eventType[t.type]!==this.initiated)&&!(this.options.ignoreEventException&&this.options.ignoreEventException(t))){this.options.preventDefault&&!r.isBadAndroid&&!r.preventDefaultException(t.target,this.options.preventDefaultException)&&t.preventDefault();var o=t.touches?t.touches[0]:t,a;this.initiated=r.eventType[t.type],this.moved=!1,this.distX=0,this.distY=0,this.directionX=0,this.directionY=0,this.directionLocked=0,this.startTime=r.getTime(),this.options.useTransition&&this.isInTransition?(this._transitionTime(),this.isInTransition=!1,a=this.getComputedPosition(),this._translate(i.round(a.x),i.round(a.y)),this._execEvent("scrollEnd")):!this.options.useTransition&&this.isAnimating&&(this.isAnimating=!1,this._execEvent("scrollEnd")),this.startX=this.x,this.startY=this.y,this.absStartX=this.x,this.absStartY=this.y,this.pointX=o.pageX,this.pointY=o.pageY,this._execEvent("beforeScrollStart")}},_move:function(t){if(!(!this.enabled||r.eventType[t.type]!==this.initiated)&&!(this.options.ignoreEventException&&this.options.ignoreEventException(t))){this.options.preventDefault&&t.preventDefault();var e=t.touches?t.touches[0]:t,o=e.pageX-this.pointX,a=e.pageY-this.pointY,h=r.getTime(),s,n,l,d;if(this.pointX=e.pageX,this.pointY=e.pageY,this.distX+=o,this.distY+=a,l=i.abs(this.distX),d=i.abs(this.distY),!(h-this.endTime>300&&l<10&&d<10)){if(!this.directionLocked&&!this.options.freeScroll&&(l>d+this.options.directionLockThreshold?this.directionLocked="h":d>=l+this.options.directionLockThreshold?this.directionLocked="v":this.directionLocked="n"),this.directionLocked=="h"){if(this.options.eventPassthrough=="vertical")t.preventDefault();else if(this.options.eventPassthrough=="horizontal"){this.initiated=!1;return}a=0}else if(this.directionLocked=="v"){if(this.options.eventPassthrough=="horizontal")t.preventDefault();else if(this.options.eventPassthrough=="vertical"){this.initiated=!1;return}o=0}o=this.hasHorizontalScroll?o:0,a=this.hasVerticalScroll?a:0,s=this.x+o,n=this.y+a,(s>0||s<this.maxScrollX)&&(s=this.options.bounce?this.x+o/3:s>0?0:this.maxScrollX),(n>0||n<this.maxScrollY)&&(n=this.options.bounce?this.y+a/3:n>0?0:this.maxScrollY),this.directionX=o>0?-1:o<0?1:0,this.directionY=a>0?-1:a<0?1:0,this.moved||this._execEvent("scrollStart"),this.moved=!0,this._translate(s,n),h-this.startTime>300&&(this.startTime=h,this.startX=this.x,this.startY=this.y,this.options.probeType==1&&this._execEvent("scroll")),this.options.probeType>1&&this._execEvent("scroll")}}},_end:function(t){if(!(!this.enabled||r.eventType[t.type]!==this.initiated)){this.options.preventDefault&&!r.preventDefaultException(t.target,this.options.preventDefaultException)&&t.preventDefault();var e=t.changedTouches?t.changedTouches[0]:t,o,a,h=r.getTime()-this.startTime,s=i.round(this.x),n=i.round(this.y),l=i.abs(s-this.startX),d=i.abs(n-this.startY),T=0,v="";if(this.isInTransition=0,this.initiated=0,this.endTime=r.getTime(),!this.resetPosition(this.options.bounceTime)){if(this.scrollTo(s,n),!this.moved){this.options.tap&&r.tap(t,this.options.tap),this.options.click&&r.click(t),this._execEvent("scrollCancel");return}if(this._events.flick&&h<200&&l<100&&d<100){this._execEvent("flick");return}if(this.options.momentum&&h<300&&(o=this.hasHorizontalScroll?r.momentum(this.x,this.startX,h,this.maxScrollX,this.options.bounce?this.wrapperWidth:0,this.options.deceleration):{destination:s,duration:0},a=this.hasVerticalScroll?r.momentum(this.y,this.startY,h,this.maxScrollY,this.options.bounce?this.wrapperHeight:0,this.options.deceleration):{destination:n,duration:0},s=o.destination,n=a.destination,T=i.max(o.duration,a.duration),this.isInTransition=1),this.options.snap){var p=this._nearestSnap(s,n);this.currentPage=p,T=this.options.snapSpeed||i.max(i.max(i.min(i.abs(s-p.x),1e3),i.min(i.abs(n-p.y),1e3)),300),s=p.x,n=p.y,this.directionX=0,this.directionY=0,v=this.options.bounceEasing}if(s!=this.x||n!=this.y){(s>0||s<this.maxScrollX||n>0||n<this.maxScrollY)&&(v=r.ease.quadratic),this.scrollTo(s,n,T,v);return}this._execEvent("scrollEnd")}}},_resize:function(){var t=this;clearTimeout(this.resizeTimeout),this.resizeTimeout=setTimeout(function(){t.refresh()},this.options.resizePolling)},resetPosition:function(t){var e=this.x,o=this.y;return t=t||0,!this.hasHorizontalScroll||this.x>0?e=0:this.x<this.maxScrollX&&(e=this.maxScrollX),!this.hasVerticalScroll||this.y>0?o=0:this.y<this.maxScrollY&&(o=this.maxScrollY),e==this.x&&o==this.y?!1:(this.scrollTo(e,o,t,this.options.bounceEasing),!0)},disable:function(){this.enabled=!1},enable:function(){this.enabled=!0},refresh:function(){r.getRect(this.wrapper),this.wrapperWidth=this.wrapper.clientWidth,this.wrapperHeight=this.wrapper.clientHeight;var t=r.getRect(this.scroller);this.scrollerWidth=t.width,this.scrollerHeight=t.height,this.maxScrollX=this.wrapperWidth-this.scrollerWidth,this.maxScrollY=this.wrapperHeight-this.scrollerHeight,this.hasHorizontalScroll=this.options.scrollX&&this.maxScrollX<0,this.hasVerticalScroll=this.options.scrollY&&this.maxScrollY<0,this.hasHorizontalScroll||(this.maxScrollX=0,this.scrollerWidth=this.wrapperWidth),this.hasVerticalScroll||(this.maxScrollY=0,this.scrollerHeight=this.wrapperHeight),this.endTime=0,this.directionX=0,this.directionY=0,r.hasPointer&&!this.options.disablePointer&&(this.wrapper.style[r.style.touchAction]=r.getTouchAction(this.options.eventPassthrough,!0),this.wrapper.style[r.style.touchAction]||(this.wrapper.style[r.style.touchAction]=r.getTouchAction(this.options.eventPassthrough,!1))),this.wrapperOffset=r.offset(this.wrapper),this._execEvent("refresh"),this.resetPosition()},on:function(t,e){this._events[t]||(this._events[t]=[]),this._events[t].push(e)},off:function(t,e){if(this._events[t]){var o=this._events[t].indexOf(e);o>-1&&this._events[t].splice(o,1)}},_execEvent:function(t){if(this._events[t]){var e=0,o=this._events[t].length;if(o)for(;e<o;e++)this._events[t][e].apply(this,[].slice.call(arguments,1))}},scrollBy:function(t,e,o,a){t=this.x+t,e=this.y+e,o=o||0,this.scrollTo(t,e,o,a)},scrollTo:function(t,e,o,a){a=a||r.ease.circular,this.isInTransition=this.options.useTransition&&o>0;var h=this.options.useTransition&&a.style;!o||h?(h&&(this._transitionTimingFunction(a.style),this._transitionTime(o)),this._translate(t,e)):this._animate(t,e,o,a.fn)},scrollToElement:function(t,e,o,a,h){if(t=t.nodeType?t:this.scroller.querySelector(t),!!t){var s=r.offset(t);s.left-=this.wrapperOffset.left,s.top-=this.wrapperOffset.top;var n=r.getRect(t),l=r.getRect(this.wrapper);o===!0&&(o=i.round(n.width/2-l.width/2)),a===!0&&(a=i.round(n.height/2-l.height/2)),s.left-=o||0,s.top-=a||0,s.left=s.left>0?0:s.left<this.maxScrollX?this.maxScrollX:s.left,s.top=s.top>0?0:s.top<this.maxScrollY?this.maxScrollY:s.top,e=e==null||e==="auto"?i.max(i.abs(this.x-s.left),i.abs(this.y-s.top)):e,this.scrollTo(s.left,s.top,e,h)}},_transitionTime:function(t){if(this.options.useTransition){t=t||0;var e=r.style.transitionDuration;if(e){if(this.scrollerStyle[e]=t+"ms",!t&&r.isBadAndroid){this.scrollerStyle[e]="0.0001ms";var o=this;g(function(){o.scrollerStyle[e]==="0.0001ms"&&(o.scrollerStyle[e]="0s")})}if(this.indicators)for(var a=this.indicators.length;a--;)this.indicators[a].transitionTime(t)}}},_transitionTimingFunction:function(t){if(this.scrollerStyle[r.style.transitionTimingFunction]=t,this.indicators)for(var e=this.indicators.length;e--;)this.indicators[e].transitionTimingFunction(t)},_translate:function(t,e){if(this.options.useTransform?this.scrollerStyle[r.style.transform]="translate("+t+"px,"+e+"px)"+this.translateZ:(t=i.round(t),e=i.round(e),this.scrollerStyle.left=t+"px",this.scrollerStyle.top=e+"px"),this.x=t,this.y=e,this.indicators)for(var o=this.indicators.length;o--;)this.indicators[o].updatePosition()},_initEvents:function(t){var e=t?r.removeEvent:r.addEvent,o=this.options.bindToWrapper?this.wrapper:c;e(c,"orientationchange",this),e(c,"resize",this),this.options.click&&e(this.wrapper,"click",this,!0),this.options.disableMouse||(e(this.wrapper,"mousedown",this),e(o,"mousemove",this),e(o,"mousecancel",this),e(o,"mouseup",this)),r.hasPointer&&!this.options.disablePointer&&(e(this.wrapper,r.prefixPointerEvent("pointerdown"),this),e(o,r.prefixPointerEvent("pointermove"),this),e(o,r.prefixPointerEvent("pointercancel"),this),e(o,r.prefixPointerEvent("pointerup"),this)),r.hasTouch&&!this.options.disableTouch&&(e(this.wrapper,"touchstart",this),e(o,"touchmove",this),e(o,"touchcancel",this),e(o,"touchend",this)),e(this.scroller,"transitionend",this),e(this.scroller,"webkitTransitionEnd",this),e(this.scroller,"oTransitionEnd",this),e(this.scroller,"MSTransitionEnd",this)},getComputedPosition:function(){var t=c.getComputedStyle(this.scroller,null),e,o;return this.options.useTransform?(t=t[r.style.transform].split(")")[0].split(", "),e=+(t[12]||t[4]),o=+(t[13]||t[5])):(e=+t.left.replace(/[^-\d.]/g,""),o=+t.top.replace(/[^-\d.]/g,"")),{x:e,y:o}},_initIndicators:function(){var t=this.options.interactiveScrollbars,e=typeof this.options.scrollbars!="string",o=[],a,h=this;this.indicators=[],this.options.scrollbars&&(this.options.scrollY&&(a={el:m("v",t,this.options.scrollbars),interactive:t,defaultScrollbars:!0,customStyle:e,resize:this.options.resizeScrollbars,shrink:this.options.shrinkScrollbars,fade:this.options.fadeScrollbars,listenX:!1},this.wrapper.appendChild(a.el),o.push(a)),this.options.scrollX&&(a={el:m("h",t,this.options.scrollbars),interactive:t,defaultScrollbars:!0,customStyle:e,resize:this.options.resizeScrollbars,shrink:this.options.shrinkScrollbars,fade:this.options.fadeScrollbars,listenY:!1},this.wrapper.appendChild(a.el),o.push(a))),this.options.indicators&&(o=o.concat(this.options.indicators));for(var s=o.length;s--;)this.indicators.push(new D(this,o[s]));function n(l){if(h.indicators)for(var d=h.indicators.length;d--;)l.call(h.indicators[d])}this.options.fadeScrollbars&&(this.on("scrollEnd",function(){n(function(){this.fade()})}),this.on("scrollCancel",function(){n(function(){this.fade()})}),this.on("scrollStart",function(){n(function(){this.fade(1)})}),this.on("beforeScrollStart",function(){n(function(){this.fade(1,!0)})})),this.on("refresh",function(){n(function(){this.refresh()})}),this.on("destroy",function(){n(function(){this.destroy()}),delete this.indicators})},_initWheel:function(){r.addEvent(this.wrapper,"wheel",this),r.addEvent(this.wrapper,"mousewheel",this),r.addEvent(this.wrapper,"DOMMouseScroll",this),this.on("destroy",function(){clearTimeout(this.wheelTimeout),this.wheelTimeout=null,r.removeEvent(this.wrapper,"wheel",this),r.removeEvent(this.wrapper,"mousewheel",this),r.removeEvent(this.wrapper,"DOMMouseScroll",this)})},_wheel:function(t){if(this.enabled){if(t.metaKey||t.ctrlKey||t.buttons===4)return!0;t.preventDefault();var e,o,a,h,s=this;if(this.wheelTimeout===void 0&&s._execEvent("scrollStart"),clearTimeout(this.wheelTimeout),this.wheelTimeout=setTimeout(function(){s.options.snap||s._execEvent("scrollEnd"),s.wheelTimeout=void 0},400),"deltaX"in t)t.deltaMode===1?(e=-t.deltaX*this.options.mouseWheelSpeed,o=-t.deltaY*this.options.mouseWheelSpeed):(e=-t.deltaX,o=-t.deltaY);else if("wheelDeltaX"in t)e=t.wheelDeltaX/120*this.options.mouseWheelSpeed,o=t.wheelDeltaY/120*this.options.mouseWheelSpeed;else if("wheelDelta"in t)e=o=t.wheelDelta/120*this.options.mouseWheelSpeed;else if("detail"in t)e=o=-t.detail/3*this.options.mouseWheelSpeed;else return;if(e*=this.options.invertWheelDirection,o*=this.options.invertWheelDirection,this.options.snap){a=this.currentPage.pageX,h=this.currentPage.pageY,e>0?a--:e<0&&a++,o>0?h--:o<0&&h++,this.goToPage(a,h);return}a=this.x+i.round(this.hasHorizontalScroll?e:0),h=this.y+i.round(this.hasVerticalScroll?o:0),this.directionX=e>0?-1:e<0?1:0,this.directionY=o>0?-1:o<0?1:0,a>0?a=0:a<this.maxScrollX&&(a=this.maxScrollX),h>0?h=0:h<this.maxScrollY&&(h=this.maxScrollY),this.scrollTo(a,h,0),this.options.probeType>1&&this._execEvent("scroll")}},_initSnap:function(){this.currentPage={},typeof this.options.snap=="string"&&(this.options.snap=this.scroller.querySelectorAll(this.options.snap)),this.on("refresh",function(){var t=0,e,o=0,a,h,s,n=0,l,d=this.options.snapStepX||this.wrapperWidth,T=this.options.snapStepY||this.wrapperHeight,v,p;if(this.pages=[],!(!this.wrapperWidth||!this.wrapperHeight||!this.scrollerWidth||!this.scrollerHeight)){if(this.options.snap===!0)for(h=i.round(d/2),s=i.round(T/2);n>-this.scrollerWidth;){for(this.pages[t]=[],e=0,l=0;l>-this.scrollerHeight;)this.pages[t][e]={x:i.max(n,this.maxScrollX),y:i.max(l,this.maxScrollY),width:d,height:T,cx:n-h,cy:l-s},l-=T,e++;n-=d,t++}else for(v=this.options.snap,e=v.length,a=-1;t<e;t++)p=r.getRect(v[t]),(t===0||p.left<=r.getRect(v[t-1]).left)&&(o=0,a++),this.pages[o]||(this.pages[o]=[]),n=i.max(-p.left,this.maxScrollX),l=i.max(-p.top,this.maxScrollY),h=n-i.round(p.width/2),s=l-i.round(p.height/2),this.pages[o][a]={x:n,y:l,width:p.width,height:p.height,cx:h,cy:s},n>this.maxScrollX&&o++;this.goToPage(this.currentPage.pageX||0,this.currentPage.pageY||0,0),this.options.snapThreshold%1===0?(this.snapThresholdX=this.options.snapThreshold,this.snapThresholdY=this.options.snapThreshold):(this.snapThresholdX=i.round(this.pages[this.currentPage.pageX][this.currentPage.pageY].width*this.options.snapThreshold),this.snapThresholdY=i.round(this.pages[this.currentPage.pageX][this.currentPage.pageY].height*this.options.snapThreshold))}}),this.on("flick",function(){var t=this.options.snapSpeed||i.max(i.max(i.min(i.abs(this.x-this.startX),1e3),i.min(i.abs(this.y-this.startY),1e3)),300);this.goToPage(this.currentPage.pageX+this.directionX,this.currentPage.pageY+this.directionY,t)})},_nearestSnap:function(t,e){if(!this.pages.length)return{x:0,y:0,pageX:0,pageY:0};var o=0,a=this.pages.length,h=0;if(i.abs(t-this.absStartX)<this.snapThresholdX&&i.abs(e-this.absStartY)<this.snapThresholdY)return this.currentPage;for(t>0?t=0:t<this.maxScrollX&&(t=this.maxScrollX),e>0?e=0:e<this.maxScrollY&&(e=this.maxScrollY);o<a;o++)if(t>=this.pages[o][0].cx){t=this.pages[o][0].x;break}for(a=this.pages[o].length;h<a;h++)if(e>=this.pages[0][h].cy){e=this.pages[0][h].y;break}return o==this.currentPage.pageX&&(o+=this.directionX,o<0?o=0:o>=this.pages.length&&(o=this.pages.length-1),t=this.pages[o][0].x),h==this.currentPage.pageY&&(h+=this.directionY,h<0?h=0:h>=this.pages[0].length&&(h=this.pages[0].length-1),e=this.pages[0][h].y),{x:t,y:e,pageX:o,pageY:h}},goToPage:function(t,e,o,a){a=a||this.options.bounceEasing,t>=this.pages.length?t=this.pages.length-1:t<0&&(t=0),e>=this.pages[t].length?e=this.pages[t].length-1:e<0&&(e=0);var h=this.pages[t][e].x,s=this.pages[t][e].y;o=o===void 0?this.options.snapSpeed||i.max(i.max(i.min(i.abs(h-this.x),1e3),i.min(i.abs(s-this.y),1e3)),300):o,this.currentPage={x:h,y:s,pageX:t,pageY:e},this.scrollTo(h,s,o,a)},next:function(t,e){var o=this.currentPage.pageX,a=this.currentPage.pageY;o++,o>=this.pages.length&&this.hasVerticalScroll&&(o=0,a++),this.goToPage(o,a,t,e)},prev:function(t,e){var o=this.currentPage.pageX,a=this.currentPage.pageY;o--,o<0&&this.hasVerticalScroll&&(o=0,a--),this.goToPage(o,a,t,e)},_initKeys:function(t){var e={pageUp:33,pageDown:34,end:35,home:36,left:37,up:38,right:39,down:40},o;if(typeof this.options.keyBindings=="object")for(o in this.options.keyBindings)typeof this.options.keyBindings[o]=="string"&&(this.options.keyBindings[o]=this.options.keyBindings[o].toUpperCase().charCodeAt(0));else this.options.keyBindings={};for(o in e)this.options.keyBindings[o]=this.options.keyBindings[o]||e[o];r.addEvent(c,"keydown",this),this.on("destroy",function(){r.removeEvent(c,"keydown",this)})},_key:function(t){if(this.enabled){var e=this.options.snap,o=e?this.currentPage.pageX:this.x,a=e?this.currentPage.pageY:this.y,h=r.getTime(),s=this.keyTime||0,n=.25,l;switch(this.options.useTransition&&this.isInTransition&&(l=this.getComputedPosition(),this._translate(i.round(l.x),i.round(l.y)),this.isInTransition=!1),this.keyAcceleration=h-s<200?i.min(this.keyAcceleration+n,50):0,t.keyCode){case this.options.keyBindings.pageUp:this.hasHorizontalScroll&&!this.hasVerticalScroll?o+=e?1:this.wrapperWidth:a+=e?1:this.wrapperHeight;break;case this.options.keyBindings.pageDown:this.hasHorizontalScroll&&!this.hasVerticalScroll?o-=e?1:this.wrapperWidth:a-=e?1:this.wrapperHeight;break;case this.options.keyBindings.end:o=e?this.pages.length-1:this.maxScrollX,a=e?this.pages[0].length-1:this.maxScrollY;break;case this.options.keyBindings.home:o=0,a=0;break;case this.options.keyBindings.left:o+=e?-1:5+this.keyAcceleration>>0;break;case this.options.keyBindings.up:a+=e?1:5+this.keyAcceleration>>0;break;case this.options.keyBindings.right:o-=e?-1:5+this.keyAcceleration>>0;break;case this.options.keyBindings.down:a-=e?1:5+this.keyAcceleration>>0;break;default:return}if(e){this.goToPage(o,a);return}o>0?(o=0,this.keyAcceleration=0):o<this.maxScrollX&&(o=this.maxScrollX,this.keyAcceleration=0),a>0?(a=0,this.keyAcceleration=0):a<this.maxScrollY&&(a=this.maxScrollY,this.keyAcceleration=0),this.scrollTo(o,a,0),this.keyTime=h}},_animate:function(t,e,o,a){var h=this,s=this.x,n=this.y,l=r.getTime(),d=l+o;function T(){var v=r.getTime(),p,E,k;if(v>=d){h.isAnimating=!1,h._translate(t,e),h.resetPosition(h.options.bounceTime)||h._execEvent("scrollEnd");return}v=(v-l)/o,k=a(v),p=(t-s)*k+s,E=(e-n)*k+n,h._translate(p,E),h.isAnimating&&g(T),h.options.probeType==3&&h._execEvent("scroll")}this.isAnimating=!0,T()},handleEvent:function(t){switch(t.type){case"touchstart":case"pointerdown":case"MSPointerDown":case"mousedown":this._start(t);break;case"touchmove":case"pointermove":case"MSPointerMove":case"mousemove":this._move(t);break;case"touchend":case"pointerup":case"MSPointerUp":case"mouseup":case"touchcancel":case"pointercancel":case"MSPointerCancel":case"mousecancel":this._end(t);break;case"orientationchange":case"resize":this._resize();break;case"transitionend":case"webkitTransitionEnd":case"oTransitionEnd":case"MSTransitionEnd":this._transitionEnd(t);break;case"wheel":case"DOMMouseScroll":case"mousewheel":this._wheel(t);break;case"keydown":this._key(t);break;case"click":this.enabled&&!t._constructed&&(t.preventDefault(),t.stopPropagation());break}}};function m(t,e,o){var a=S.createElement("div"),h=S.createElement("div");return o===!0&&(a.style.cssText="position:absolute;z-index:9999",h.style.cssText="-webkit-box-sizing:border-box;-moz-box-sizing:border-box;box-sizing:border-box;position:absolute;background:rgba(0,0,0,0.5);border:1px solid rgba(255,255,255,0.9);border-radius:3px"),h.className="iScrollIndicator",t=="h"?(o===!0&&(a.style.cssText+=";height:7px;left:2px;right:2px;bottom:0",h.style.height="100%"),a.className="iScrollHorizontalScrollbar"):(o===!0&&(a.style.cssText+=";width:7px;bottom:2px;top:2px;right:1px",h.style.width="100%"),a.className="iScrollVerticalScrollbar"),a.style.cssText+=";overflow:hidden",e||(a.style.pointerEvents="none"),a.appendChild(h),a}function D(t,e){this.wrapper=typeof e.el=="string"?S.querySelector(e.el):e.el,this.wrapperStyle=this.wrapper.style,this.indicator=this.wrapper.children[0],this.indicatorStyle=this.indicator.style,this.scroller=t,this.options={listenX:!0,listenY:!0,interactive:!1,resize:!0,defaultScrollbars:!1,shrink:!1,fade:!1,speedRatioX:0,speedRatioY:0};for(var o in e)this.options[o]=e[o];if(this.sizeRatioX=1,this.sizeRatioY=1,this.maxPosX=0,this.maxPosY=0,this.options.interactive&&(this.options.disableTouch||(r.addEvent(this.indicator,"touchstart",this),r.addEvent(c,"touchend",this)),this.options.disablePointer||(r.addEvent(this.indicator,r.prefixPointerEvent("pointerdown"),this),r.addEvent(c,r.prefixPointerEvent("pointerup"),this)),this.options.disableMouse||(r.addEvent(this.indicator,"mousedown",this),r.addEvent(c,"mouseup",this))),this.options.fade){this.wrapperStyle[r.style.transform]=this.scroller.translateZ;var a=r.style.transitionDuration;if(!a)return;this.wrapperStyle[a]=r.isBadAndroid?"0.0001ms":"0ms";var h=this;r.isBadAndroid&&g(function(){h.wrapperStyle[a]==="0.0001ms"&&(h.wrapperStyle[a]="0s")}),this.wrapperStyle.opacity="0"}}D.prototype={handleEvent:function(t){switch(t.type){case"touchstart":case"pointerdown":case"MSPointerDown":case"mousedown":this._start(t);break;case"touchmove":case"pointermove":case"MSPointerMove":case"mousemove":this._move(t);break;case"touchend":case"pointerup":case"MSPointerUp":case"mouseup":case"touchcancel":case"pointercancel":case"MSPointerCancel":case"mousecancel":this._end(t);break}},destroy:function(){this.options.fadeScrollbars&&(clearTimeout(this.fadeTimeout),this.fadeTimeout=null),this.options.interactive&&(r.removeEvent(this.indicator,"touchstart",this),r.removeEvent(this.indicator,r.prefixPointerEvent("pointerdown"),this),r.removeEvent(this.indicator,"mousedown",this),r.removeEvent(c,"touchmove",this),r.removeEvent(c,r.prefixPointerEvent("pointermove"),this),r.removeEvent(c,"mousemove",this),r.removeEvent(c,"touchend",this),r.removeEvent(c,r.prefixPointerEvent("pointerup"),this),r.removeEvent(c,"mouseup",this)),this.options.defaultScrollbars&&this.wrapper.parentNode&&this.wrapper.parentNode.removeChild(this.wrapper)},_start:function(t){var e=t.touches?t.touches[0]:t;t.preventDefault(),t.stopPropagation(),this.transitionTime(),this.initiated=!0,this.moved=!1,this.lastPointX=e.pageX,this.lastPointY=e.pageY,this.startTime=r.getTime(),this.options.disableTouch||r.addEvent(c,"touchmove",this),this.options.disablePointer||r.addEvent(c,r.prefixPointerEvent("pointermove"),this),this.options.disableMouse||r.addEvent(c,"mousemove",this),this.scroller._execEvent("beforeScrollStart")},_move:function(t){var e=t.touches?t.touches[0]:t,o,a,h,s,n=r.getTime();this.moved||this.scroller._execEvent("scrollStart"),this.moved=!0,o=e.pageX-this.lastPointX,this.lastPointX=e.pageX,a=e.pageY-this.lastPointY,this.lastPointY=e.pageY,h=this.x+o,s=this.y+a,this._pos(h,s),this.scroller.options.probeType==1&&n-this.startTime>300?(this.startTime=n,this.scroller._execEvent("scroll")):this.scroller.options.probeType>1&&this.scroller._execEvent("scroll"),t.preventDefault(),t.stopPropagation()},_end:function(t){if(this.initiated){if(this.initiated=!1,t.preventDefault(),t.stopPropagation(),r.removeEvent(c,"touchmove",this),r.removeEvent(c,r.prefixPointerEvent("pointermove"),this),r.removeEvent(c,"mousemove",this),this.scroller.options.snap){var e=this.scroller._nearestSnap(this.scroller.x,this.scroller.y),o=this.options.snapSpeed||i.max(i.max(i.min(i.abs(this.scroller.x-e.x),1e3),i.min(i.abs(this.scroller.y-e.y),1e3)),300);(this.scroller.x!=e.x||this.scroller.y!=e.y)&&(this.scroller.directionX=0,this.scroller.directionY=0,this.scroller.currentPage=e,this.scroller.scrollTo(e.x,e.y,o,this.scroller.options.bounceEasing))}this.moved&&this.scroller._execEvent("scrollEnd")}},transitionTime:function(t){t=t||0;var e=r.style.transitionDuration;if(e&&(this.indicatorStyle[e]=t+"ms",!t&&r.isBadAndroid)){this.indicatorStyle[e]="0.0001ms";var o=this;g(function(){o.indicatorStyle[e]==="0.0001ms"&&(o.indicatorStyle[e]="0s")})}},transitionTimingFunction:function(t){this.indicatorStyle[r.style.transitionTimingFunction]=t},refresh:function(){this.transitionTime(),this.options.listenX&&!this.options.listenY?this.indicatorStyle.display=this.scroller.hasHorizontalScroll?"block":"none":this.options.listenY&&!this.options.listenX?this.indicatorStyle.display=this.scroller.hasVerticalScroll?"block":"none":this.indicatorStyle.display=this.scroller.hasHorizontalScroll||this.scroller.hasVerticalScroll?"block":"none",this.scroller.hasHorizontalScroll&&this.scroller.hasVerticalScroll?(r.addClass(this.wrapper,"iScrollBothScrollbars"),r.removeClass(this.wrapper,"iScrollLoneScrollbar"),this.options.defaultScrollbars&&this.options.customStyle&&(this.options.listenX?this.wrapper.style.right="8px":this.wrapper.style.bottom="8px")):(r.removeClass(this.wrapper,"iScrollBothScrollbars"),r.addClass(this.wrapper,"iScrollLoneScrollbar"),this.options.defaultScrollbars&&this.options.customStyle&&(this.options.listenX?this.wrapper.style.right="2px":this.wrapper.style.bottom="2px")),r.getRect(this.wrapper),this.options.listenX&&(this.wrapperWidth=this.wrapper.clientWidth,this.options.resize?(this.indicatorWidth=i.max(i.round(this.wrapperWidth*this.wrapperWidth/(this.scroller.scrollerWidth||this.wrapperWidth||1)),8),this.indicatorStyle.width=this.indicatorWidth+"px"):this.indicatorWidth=this.indicator.clientWidth,this.maxPosX=this.wrapperWidth-this.indicatorWidth,this.options.shrink=="clip"?(this.minBoundaryX=-this.indicatorWidth+8,this.maxBoundaryX=this.wrapperWidth-8):(this.minBoundaryX=0,this.maxBoundaryX=this.maxPosX),this.sizeRatioX=this.options.speedRatioX||this.scroller.maxScrollX&&this.maxPosX/this.scroller.maxScrollX),this.options.listenY&&(this.wrapperHeight=this.wrapper.clientHeight,this.options.resize?(this.indicatorHeight=i.max(i.round(this.wrapperHeight*this.wrapperHeight/(this.scroller.scrollerHeight||this.wrapperHeight||1)),8),this.indicatorStyle.height=this.indicatorHeight+"px"):this.indicatorHeight=this.indicator.clientHeight,this.maxPosY=this.wrapperHeight-this.indicatorHeight,this.options.shrink=="clip"?(this.minBoundaryY=-this.indicatorHeight+8,this.maxBoundaryY=this.wrapperHeight-8):(this.minBoundaryY=0,this.maxBoundaryY=this.maxPosY),this.maxPosY=this.wrapperHeight-this.indicatorHeight,this.sizeRatioY=this.options.speedRatioY||this.scroller.maxScrollY&&this.maxPosY/this.scroller.maxScrollY),this.updatePosition()},updatePosition:function(){var t=this.options.listenX&&i.round(this.sizeRatioX*this.scroller.x)||0,e=this.options.listenY&&i.round(this.sizeRatioY*this.scroller.y)||0;this.options.ignoreBoundaries||(t<this.minBoundaryX?(this.options.shrink=="scale"&&(this.width=i.max(this.indicatorWidth+t,8),this.indicatorStyle.width=this.width+"px"),t=this.minBoundaryX):t>this.maxBoundaryX?this.options.shrink=="scale"?(this.width=i.max(this.indicatorWidth-(t-this.maxPosX),8),this.indicatorStyle.width=this.width+"px",t=this.maxPosX+this.indicatorWidth-this.width):t=this.maxBoundaryX:this.options.shrink=="scale"&&this.width!=this.indicatorWidth&&(this.width=this.indicatorWidth,this.indicatorStyle.width=this.width+"px"),e<this.minBoundaryY?(this.options.shrink=="scale"&&(this.height=i.max(this.indicatorHeight+e*3,8),this.indicatorStyle.height=this.height+"px"),e=this.minBoundaryY):e>this.maxBoundaryY?this.options.shrink=="scale"?(this.height=i.max(this.indicatorHeight-(e-this.maxPosY)*3,8),this.indicatorStyle.height=this.height+"px",e=this.maxPosY+this.indicatorHeight-this.height):e=this.maxBoundaryY:this.options.shrink=="scale"&&this.height!=this.indicatorHeight&&(this.height=this.indicatorHeight,this.indicatorStyle.height=this.height+"px")),this.x=t,this.y=e,this.scroller.options.useTransform?this.indicatorStyle[r.style.transform]="translate("+t+"px,"+e+"px)"+this.scroller.translateZ:(this.indicatorStyle.left=t+"px",this.indicatorStyle.top=e+"px")},_pos:function(t,e){t<0?t=0:t>this.maxPosX&&(t=this.maxPosX),e<0?e=0:e>this.maxPosY&&(e=this.maxPosY),t=this.options.listenX?i.round(t/this.sizeRatioX):this.scroller.x,e=this.options.listenY?i.round(e/this.sizeRatioY):this.scroller.y,this.scroller.scrollTo(t,e)},fade:function(t,e){if(!(e&&!this.visible)){clearTimeout(this.fadeTimeout),this.fadeTimeout=null;var o=t?250:500,a=t?0:300;t=t?"1":"0",this.wrapperStyle[r.style.transitionDuration]=o+"ms",this.fadeTimeout=setTimeout((function(h){this.wrapperStyle.opacity=h,this.visible=+h}).bind(this,t),a)}}},M.utils=r,c.IScroll=M})(window,document,Math)},16700:c=>{"use strict";c.exports=canvg},94994:c=>{"use strict";c.exports=dompurify},9820:c=>{"use strict";c.exports=html2canvas}},V={};function w(c){var S=V[c];if(S!==void 0)return S.exports;var i=V[c]={id:c,loaded:!1,exports:{}};return z[c].call(i.exports,i,i.exports,w),i.loaded=!0,i.exports}w.m=z,w.amdO={},(()=>{var c=[];w.O=(S,i,g,r)=>{if(i){r=r||0;for(var M=c.length;M>0&&c[M-1][2]>r;M--)c[M]=c[M-1];c[M]=[i,g,r];return}for(var m=1/0,M=0;M<c.length;M++){for(var[i,g,r]=c[M],D=!0,t=0;t<i.length;t++)(r&!1||m>=r)&&Object.keys(w.O).every(n=>w.O[n](i[t]))?i.splice(t--,1):(D=!1,r<m&&(m=r));if(D){c.splice(M--,1);var e=g();e!==void 0&&(S=e)}}return S}})(),w.n=c=>{var S=c&&c.__esModule?()=>c.default:()=>c;return w.d(S,{a:S}),S},(()=>{var c=Object.getPrototypeOf?i=>Object.getPrototypeOf(i):i=>i.__proto__,S;w.t=function(i,g){if(g&1&&(i=this(i)),g&8||typeof i=="object"&&i&&(g&4&&i.__esModule||g&16&&typeof i.then=="function"))return i;var r=Object.create(null);w.r(r);var M={};S=S||[null,c({}),c([]),c(c)];for(var m=g&2&&i;typeof m=="object"&&!~S.indexOf(m);m=c(m))Object.getOwnPropertyNames(m).forEach(D=>M[D]=()=>i[D]);return M.default=()=>i,w.d(r,M),r}})(),w.d=(c,S)=>{for(var i in S)w.o(S,i)&&!w.o(c,i)&&Object.defineProperty(c,i,{enumerable:!0,get:S[i]})},w.f={},w.e=c=>Promise.all(Object.keys(w.f).reduce((S,i)=>(w.f[i](c,S),S),[])),w.u=c=>""+{214:"lazy-lib-paper",437:"lazy-lib-fontkit",703:"lazy-lib-rehype",956:"lazy-lib-i18n",976:"lazy-lib-dl"}[c]+"-"+{214:"652e1d1aaf5a025c5f3d",437:"c05f27c8c0bb64d649b9",703:"0e44dd6bc372502fe509",956:"be321a8f3a22f91c6880",976:"df7058e941c9b6857595"}[c]+".js",w.miniCssF=c=>{},w.g=function(){if(typeof globalThis=="object")return globalThis;try{return this||new Function("return this")()}catch(c){if(typeof window=="object")return window}}(),w.o=(c,S)=>Object.prototype.hasOwnProperty.call(c,S),(()=>{var c={},S="@mb2024/mb-proto:";w.l=(i,g,r,M)=>{if(c[i]){c[i].push(g);return}var m,D;if(r!==void 0)for(var t=document.getElementsByTagName("script"),e=0;e<t.length;e++){var o=t[e];if(o.getAttribute("src")==i||o.getAttribute("data-webpack")==S+r){m=o;break}}m||(D=!0,m=document.createElement("script"),m.charset="utf-8",m.timeout=120,w.nc&&m.setAttribute("nonce",w.nc),m.setAttribute("data-webpack",S+r),m.src=i),c[i]=[g];var a=(s,n)=>{m.onerror=m.onload=null,clearTimeout(h);var l=c[i];if(delete c[i],m.parentNode&&m.parentNode.removeChild(m),l&&l.forEach(d=>d(n)),s)return s(n)},h=setTimeout(a.bind(null,void 0,{type:"timeout",target:m}),12e4);m.onerror=a.bind(null,m.onerror),m.onload=a.bind(null,m.onload),D&&document.head.appendChild(m)}})(),w.r=c=>{typeof Symbol<"u"&&Symbol.toStringTag&&Object.defineProperty(c,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(c,"__esModule",{value:!0})},w.nmd=c=>(c.paths=[],c.children||(c.children=[]),c),w.j=699,w.p="/mb-proto2/",(()=>{var c={699:0};w.f.j=(g,r)=>{var M=w.o(c,g)?c[g]:void 0;if(M!==0)if(M)r.push(M[2]);else{var m=new Promise((o,a)=>M=c[g]=[o,a]);r.push(M[2]=m);var D=w.p+w.u(g),t=new Error,e=o=>{if(w.o(c,g)&&(M=c[g],M!==0&&(c[g]=void 0),M)){var a=o&&(o.type==="load"?"missing":o.type),h=o&&o.target&&o.target.src;t.message="Loading chunk "+g+" failed.\n("+a+": "+h+")",t.name="ChunkLoadError",t.type=a,t.request=h,M[1](t)}};w.l(D,e,"chunk-"+g,g)}},w.O.j=g=>c[g]===0;var S=(g,r)=>{var[M,m,D]=r,t,e,o=0;if(M.some(h=>c[h]!==0)){for(t in m)w.o(m,t)&&(w.m[t]=m[t]);if(D)var a=D(w)}for(g&&g(r);o<M.length;o++)e=M[o],w.o(c,e)&&c[e]&&c[e][0](),c[e]=0;return w.O(a)},i=self.webpackChunk_mb2024_mb_proto=self.webpackChunk_mb2024_mb_proto||[];i.forEach(S.bind(null,0)),i.push=S.bind(null,i.push.bind(i))})(),w.nc=void 0,w.O(void 0,[31,788,908,347],()=>w(23372));var st=w.O(void 0,[31,788,908,347],()=>w(42276));st=w.O(st)})();

//# sourceMappingURL=preview-html-zip-7c9176bc14e2de15f071.js.map